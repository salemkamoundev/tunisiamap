.map-container { position: relative; height: 100vh; width: 100%; display: flex; flex-direction: column; }
#map { flex-grow: 1; width: 100%; height: 100%; z-index: 1; }

.map-controls { position: absolute; top: 20px; right: 20px; z-index: 1000; background: white; padding: 15px; border-radius: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.3); min-width: 250px; }
.main-select select { width: 100%; padding: 6px; margin-top: 5px; }

/* Filtres */
.filter-container { margin-top: 10px; animation: fadeIn 0.3s; }
.filter-header { display: flex; justify-content: space-between; margin-bottom: 10px; color: #28a745; }
.filter-header.recette-header { color: #007bff; /* Bleu pour Recette */ }

.toggle-btn { background: none; border: none; color: #666; font-size: 11px; cursor: pointer; text-decoration: underline; }
.filter-group { margin-bottom: 8px; }
.filter-group label { display: block; font-size: 12px; color: #555; }
.filter-group select { width: 100%; padding: 4px; }
.reset-btn { width: 100%; padding: 6px; margin-top: 5px; background-color: #f8f9fa; border: 1px solid #ddd; cursor: pointer; }
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

/* --- CLUSTERS --- */
::ng-deep .budget-cluster-icon {
  border-radius: 50%;
  color: white;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  width: 100px; 
  height: 100px; 
  box-shadow: 0 5px 15px rgba(0,0,0,0.4);
  text-align: center;
  cursor: pointer;
  padding: 5px;
  overflow: hidden;
  transition: transform 0.2s;
}
::ng-deep .budget-cluster-icon:hover { transform: scale(1.1); z-index: 9999; }
::ng-deep .budget-cluster-icon .amount { font-weight: bold; font-size: 11px; line-height: 1.2; }
::ng-deep .budget-cluster-icon small { font-size: 9px; opacity: 0.8; font-weight: normal; }
::ng-deep .budget-cluster-icon .location { font-size: 10px; font-weight: bold; color: #fff; margin: 2px 0; }

/* --- BUDGET (Vert) --- */
::ng-deep .budget-cluster-icon.gouvernorat { background-color: rgba(33, 136, 56, 0.95); border: 3px solid #c3e6cb; }
::ng-deep .budget-cluster-icon.municipalite { background-color: rgba(40, 167, 69, 0.95); border: 2px solid white; }

/* --- RECETTE (Bleu) --- */
::ng-deep .budget-cluster-icon.recette-gov { background-color: rgba(0, 86, 179, 0.95); border: 3px solid #b8daff; }
::ng-deep .budget-cluster-icon.recette-mun { background-color: rgba(0, 123, 255, 0.95); border: 2px solid white; }
